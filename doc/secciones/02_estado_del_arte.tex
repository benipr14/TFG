\chapter{Estado del arte}

\section{Introducción}

El fútbol es un deporte altamente impredecible, en el que incluso los detalles más pequeños pueden tener un impacto significativo en el resultado de un partido. Dada la complejidad del juego y la cantidad de variables implicadas, resulta esencial identificar qué áreas han sido objeto de estudio mediante técnicas de aprendizaje automático y cuáles presentan aún oportunidades para futuras investigaciones. Al finalizar este trabajo, se contará con una visión general y estructurada sobre los aspectos del fútbol que han sido previamente explorados, así como aquellos que permanecen relativamente inexplorados. Para la recopilación de información, se han utilizado filtros de búsqueda aplicados a términos relacionados con 'football' o 'soccer', combinados con 'machine learning' o 'deep learning'.

Como criterios de inclusión y exclusión se han usado los siguientes:
\begin{itemize}
    \item Individuos: Los jugadores analizados deben ser solamente de fútbol y no de otros deportes como fútbol sala, fútbol americano, fútbol playa, etc. Aunque sí son validos aquellos estudios hechos sobre varios deportes ya que solo se cogerán los resultados de fútbol.
    \item Técnica: Los datos han tenido que ser procesados mediante machine learning y no mediante otras técnicas.
    \item Predicción: La predicción estaba hecha sobre la actuación individual o celectiva de los jugadores y no sobre otros ámbitos fuera del mundo del fútbol como asuntos económicos o políticos.
    \item Idioma: los textos son escritos originalmente en inglés y no en otro idioma, o hechos basados en otros artículos originales.

\end{itemize}

Como se puede apreciar, los criterios de inclusión y exclusión están puestos para centrarnos exclusivamente en el fútbol y en los datos de los futbolistas, así como para intentar buscar artículos de calidad.

\section{Revisión}

Dentro del mundo del fútbol, existen tres grandes áreas en las que se han centrado numerosos estudios relacionados con el análisis y la predicción mediante datos. Estas áreas se pueden clasificar en estas categorías principales: la predicción de lesiones en los futbolistas, la predicción del resultado de los partidos, y la predicción del desarrollo de la carrera deportiva de un jugador en concreto.

Cada una de estas categorías abarca a su vez diferentes enfoques y subdivisiones específicas, las cuales se irán desarrollando a lo largo de esta sección con el objetivo de ofrecer una visión general del estado actual de la investigación en este ámbito.

El primer tema del que se va a hablar es de la lesión de los futbolistas. Se han hecho estudios para intentar predecirlas, viendo qué factores eran los más comunes y tratar de evitarlos. Por ejemplo, una de las lesiones más comunes es la distensión de isquiotibial y en este estudio, \cite{first-injury}, se analizaron a 96 jugadores profesionales de 18 equipos distintos donde se tuvieron en cuenta factores como cuál era la pierna dominante, el estado psicológico del jugador y otros atributos físicos medibles como su fuerza o flexibilidad. Utilizando un algoritmo de machine learning AD Tree, llegaron a la conclusión de que, con más de un 78\% de probabilidad, sí había factores que eran predominantes en las 18 lesiones que detectaron, entre ellos la calidad del sueño, el historial de lesiones de isquiotibial o el ángulo de su rodilla al golpear el balón.

En este otro estudio, \cite{second-injury}, se analizaron a 98 jugadores de 4 equipos diferentes y se tuvieron en cuenta factores idénticos al anterior. Su objetivo era minimizar una lesión de cualquier músculo del cuerpo, y para ello utilizaron 4 árboles de decisión que fueron C4.5, SimpleCart, ADTree y RandomTree. Los resultados obtenidos indican que, con un 66\% de probabilidad, podrían ayudar  a los entrenadores en la reducción de las lesiones de sus jugadores mediante la modificación de los entrenamientos al detectar posibles riesgos en algunos ejercicios determinados. En este estudio, \cite{third-injury}, se analizaron a 734 niños de entre 10 y 15 años durante una temporada entera. Su objetivo era predecir las lesiones por sobrecarga en los músculos de los niños, por lo que se tomaron medidas como la altura, peso, velocidad, resistencia, etc. Utilizaron un algoritmo XGBoost y con una precisión entre el 75-85\% pudieron predecir qué jugadores eran los que tenían más riesgo de lesión.

Como se puede apreciar, en el ámbito de las lesiones se han hecho varios estudios, y la mayoría de ellos exitosos, lo que nos lleva a pensar que es un campo ya explorado, pero a su vez nos indica que hay campos dentro del fútbol que sí se pueden predecir con precisión.

Vamos ahora a analizar aquellos estudios relacionados con la predicción de partidos o de eventos que ocurran dentro de partidos. En este primer estudio, \cite{first-outcome}, se analizaron 5 partidos de ligas de fútbol profesional con gran variedad de ataques, los cuales 380 fueron exitosos y 715 no lo fueron. Su objetivo era predecir qué situaciones del juego son las más favorables para tener un ataque exitoso. Un ataque exitoso se entiende como aquel en el que el balón está a menos de 25 metros de la portería rival. Para ello utilizan algunos atributos como la posesión del equipo, las posiciones de cada uno de los jugadores con coordenadas X e Y y el tiempo de juego efectivo, utilizando el algoritmo de optimización de Adam (Adaptive Moment Estimation). Finalmente, llegaron a la conclusión de que, aparte de saber qué ataques podrían ser exitosos, también podría utilizarse para evaluar la posición de los jugadores y la velocidad de los ataques. En este otro estudio mucho más grande, \cite{second-outcome}, se analizaron a 26 equipos profesionales durante 4 temporadas y contabilizaron 1.237 ataques exitosos y  11.187 que no lo fueron. Mediante un sistema de video semiautomático analizaron el centro geométrico entre las distintas líneas del equipo, sobre todo del portero con la defensa y la defensa con los centrocampistas. Se utilizó un algoritmo de k-medias, y se llegó a la conclusión de que aplicando el centro geométrico a las líneas del equipo en vez de al equipo entero en su totalidad es más preciso a la hora de predecir ataques exitosos, así como que los ataques exitosos dependen de que los defensores creen espacio para los atacantes y de que estén sincronizados con los centrocampistas.

En el estudio presentado en \cite{third-outcome}, se analizaron partidos de la liga catarí disputados entre 2011 y 2022, utilizando datos históricos de los jugadores que participaron en dichos encuentros. Mediante el uso de redes neuronales GRU (Gated Recurrent Units), se logró predecir el equipo ganador con una precisión del 80\%. Además, el análisis se extendió al desempeño de los jugadores en distintas fases del partido, concluyéndose que los defensores desempeñan un papel determinante en el resultado final. Asimismo, se identificó que los intervalos temporales comprendidos entre los minutos 15 y 30 de cada mitad son los más significativos en términos de impacto en el rendimiento general del equipo.

Como se puede apreciar, estos estudios tratan sobre ataques exitosos y la predicción de un ganador, sin embargo, solo utilizan las estadísticas puras de los jugadores y no tienen en cuenta su relación con las zonas del campo en las que ha estado cada jugador.

Ahora vamos a pasar a analizar 2 estudios sobre los pases de los jugadores. En el primero de ellos, \cite{first-passes}, analizan 760 partidos durante 2 temporadas en la primera división inglesa, teniendo en cuenta cuál es la calidad del jugador que da el pase y su situación antes de darlo. Su objetivo es predecir la dificultad del pase y la probabilidad de que este sea exitoso, y para ello utilizan un algoritmo de naive bayes. El estudio es exitoso y consigue detectar a quiénes serían los mejores pasadores. En este otro estudio más preciso, \cite{second-passes}, se analizó al equipo de fútbol de 'Arsenal' durante 4 partidos de la primera división inglesa para intentar predecir sus pases. Utilizando un sistema de cámaras y de observadores humanos, contabilizaron 2932 pases durante el análisis. Para la predicción se tuvieron en cuenta factores como la trayectoria que sigue el jugador en el campo, los toques al balón, pases, tiros y mapas donde dominaba más cada jugador. Para el algoritmo utilizaron un RUSBoost classifier y un multinomial logistic regression y con más de un 90\% de precisión consideraron que sí podían predecir cómo de bueno iba a ser un pase que se iba a dar.

En estos estudios sí pudieron predecir con éxito la calidad y efectividad que podía tener un pase, teniendo en cuenta atributos del jugador como su posición en el campo, sin embargo no se siguió desarrollando para predecir el resultado de los partidos con la misma técnica.

Después se realizaron otros estudios como en, \cite{first-other}, donde se analizó 60 partidos de la liga alemana, con un total de casi 70.000 acciones captadas mediante un sistema de cámaras semiautomático. Tuvieron en cuenta la posición de los jugadores, posesión del equipo, posesión individual y acciones individuales y colectivas con el balón. Querían determinar cuánto tiempo pasa el balón en la esfera de influencia de un jugador, basándose en la distancia entre los jugadores y el balón, junto con su dirección de movimiento, velocidad y aceleración. Se hace mediante la configuración espacio-temporal del jugador que controla el balón utilizando redes bayesianas. El estudio llega a la conclusión de que podemos saber durante cuánto tiempo ha estado el balón en la esfera de influencia de un futbolista y conocer su influencia en el juego.

En este otro estudio, \cite{second-other}, se analizaron a 4 equipos de la primera division española durante 4 temporadas y se tuvieron en cuenta durante los ataques del equipo la posesión del balón, los regates, desmarques así como los libres directos e indirectos. Su objetivo era predecir cuál sería el patrón de ataque del equipo tanto en jugadas de posesión como a balón parado. Utilizaron un algoritmo de random forest y k-vecinos más cercanos y entre una precisión del 67-93\%, podían predecir cuál sería el patrón de ataque del equipo. Este otro estudio, \cite{third-other}, también analiza los patrones de un equipo, para ello analizó 10 partidos de primera y segunda división alemana durante una temporada, y tuvieron en cuenta la trayectoria del jugador en el campo y las oportunidades de gol en el último cuarto del campo. Utilizaron un algoritmo k-medoids y finalmente pudieron predecir si los ataques iban a ser lentos o rápidos así como la cantidad de pases por ataque.

Predecir patrones de ataque parece ser exitoso utilizando machine learning, por lo que nos indica que esta es ya otra área ya explorada del fútbol.

Existen diversos estudios que analizan la posible trayectoria de un futbolista a lo largo de su carrera profesional. Uno de ellos es el trabajo presentado en \cite{first-career}, en el que se estudia una muestra de 966 jugadores: 209 no profesionales, 637 pertenecientes a la segunda división inglesa y 120 a la primera división inglesa. En este estudio se tienen en cuenta variables como el número de pases, su precisión y consistencia, así como entradas, duelos ganados y tiros. El objetivo principal es predecir el nivel futuro del jugador y la división en la que podría competir en la siguiente temporada, utilizando para ello una red neuronal artificial (ANN). Los resultados muestran una precisión de entre el 69\% y el 77\% en la predicción de la división futura y la trayectoria profesional del jugador a medio plazo.

En otro estudio relevante, \cite{second-career}, se analizaron 4.700 jugadores pertenecientes a 156 equipos de las ocho principales ligas europeas. Este trabajo considera un total de 29 atributos técnicos, variables psicológicas y datos de rendimiento en partidos anteriores. El objetivo es predecir si una transferencia entre dos clubes será exitosa, entendiéndose como tal una mejora en el rendimiento del jugador respecto a su temporada anterior. Para ello se emplean algoritmos como Random Forest, Naive Bayes y AdaBoost. Aunque los resultados permiten estimar el posible éxito de una transferencia, los autores destacan que estos deben interpretarse más como recomendaciones que como predicciones absolutas.

Otra dimensión interesante de predicción en el fútbol es la elaboración de alineaciones. Aunque existen pocos estudios centrados en este aspecto, uno de ellos, \cite{starting-up}, analiza más de 50.000 partidos y 30.000 jugadores a lo largo de siete temporadas en 18 ligas nacionales distintas. El objetivo del estudio es determinar cuál sería la posición óptima para cada jugador, teniendo en cuenta sus características individuales, con el fin de maximizar su rendimiento. Para ello, se emplea el algoritmo RIPPER (Repeated Incremental Pruning to Produce Error Reduction), logrando una precisión superior al 73\% en la predicción de la posición más adecuada para cada jugador. Estos resultados pueden resultar especialmente útiles a la hora de diseñar alineaciones más eficaces.

Como se ha podido observar, existen numerosos ámbitos en los que el aprendizaje automático se aplica con éxito en el contexto del fútbol. No obstante, aunque algunos estudios mencionan la posibilidad de generar mapas de calor que reflejen la influencia espacial de cada jugador, ninguno de ellos los utiliza directamente como herramienta para la predicción. Del mismo modo, aunque hay investigaciones que intentan predecir el resultado de un partido a partir de ciertos atributos, no se establece ninguna relación con los mapas de calor que muestran las zonas del campo donde ha intervenido cada jugador.

A partir de esta observación, se ha identificado una línea de investigación poco explorada, que constituye la base de este TFG: el análisis conjunto de los atributos individuales de los jugadores y las zonas del terreno de juego, haciendo uso de su mapa de calor durante el partido, con el objetivo de evaluar su influencia en el juego y el resultado del propio partido.